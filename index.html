<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wordle Deutsch</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#121213">
<style>
body { font-family: Arial, sans-serif; text-align:center; background:#121213; color:white; margin:0; padding:10px; }
.grid { display:grid; grid-template-columns:repeat(5,1fr); gap:5px; max-width:300px; margin:20px auto; }
.cell { border:2px solid #3a3a3c; height:55px; font-size:28px; font-weight:bold; display:flex; align-items:center; justify-content:center; text-transform:uppercase; }
.correct { background:#538d4e; border-color:#538d4e; }
.present { background:#b59f3b; border-color:#b59f3b; }
.absent { background:#3a3a3c; border-color:#3a3a3c; }
input { font-size:20px; padding:8px; width:140px; text-transform:uppercase; }
button { font-size:18px; padding:8px 12px; margin-left:5px; }
</style>
</head>
<body>

<h1>Mein Wordle</h1>
<div id="grid" class="grid"></div>
<input id="guess" maxlength="5" placeholder="Wort">
<button onclick="submitGuess()">OK</button>
<p id="msg"></p>

<script>
if ("serviceWorker" in navigator) navigator.serviceWorker.register("service-worker.js");

let words = [];
let solution = "";
let row = 0;
const max = 6;
const grid = document.getElementById("grid");

// Grid erstellen
for (let i = 0; i < max*5; i++) {
    const c = document.createElement("div");
    c.className = "cell";
    grid.appendChild(c);
}

// W√∂rter laden
fetch("woerter.txt").then(r => r.text()).then(t => {
    // Zeilen aufsplitten, Leerzeichen entfernen, nur 5-Buchstaben-W√∂rter
    words = t.split("\n")
             .map(w => w.trim().toLowerCase())
             .filter(w => w.length === 5);
    solution = words[Math.floor(Math.random() * words.length)];
    console.log("L√∂sungswort:", solution); // f√ºr Testzwecke
});

// Enter-Taste unterst√ºtzen
document.getElementById("guess").addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
        submitGuess();
    }
});

function submitGuess() {
    const input = document.getElementById("guess");
    const guess = input.value.toLowerCase();

    // 1Ô∏è‚É£ L√§nge pr√ºfen
    if (guess.length !== 5) {
        alert("Bitte genau 5 Buchstaben eingeben");
        return;
    }

    // 2Ô∏è‚É£ Wortliste pr√ºfen
    if (!words.includes(guess)) {
        alert("Dieses Wort ist nicht g√ºltig!");
        input.value = "";
        return;
    }

    const start = row*5;
    const solutionArray = solution.split('');
    const guessArray = guess.split('');
    const colors = ["absent","absent","absent","absent","absent"];
    const solutionUsed = [false,false,false,false,false];

    // 3Ô∏è‚É£ Gr√ºn pr√ºfen
    for (let i = 0; i < 5; i++) {
        if (guessArray[i] === solutionArray[i]) {
            colors[i] = "correct";
            solutionUsed[i] = true;
        }
    }

    // 4Ô∏è‚É£ Gelb pr√ºfen
    for (let i = 0; i < 5; i++) {
        if (colors[i] === "correct") continue;
        for (let j = 0; j < 5; j++) {
            if (!solutionUsed[j] && guessArray[i] === solutionArray[j]) {
                colors[i] = "present";
                solutionUsed[j] = true;
                break;
            }
        }
    }

    // 5Ô∏è‚É£ Zellen einf√§rben
    for (let i = 0; i < 5; i++) {
        const c = grid.children[start + i];
        c.textContent = guessArray[i].toUpperCase();
        c.className = "cell " + colors[i];
    }

    // 6Ô∏è‚É£ Gewinn pr√ºfen
    if (guess === solution) {
        document.getElementById("msg").textContent = "üéâ Juhuu, gewonnen!";
        input.disabled = true;
        return;
    }

    row++;
    input.value = "";

    // 7Ô∏è‚É£ Verlust pr√ºfen
    if (row >= max) {
        document.getElementById("msg").textContent = "Leider Verloren! Wort war: " + solution.toUpperCase();
        input.disabled = true;
    }
}
</script>

</body>
</html>

</body>
</html>
